#import "std/term" as term;
#import "std/io" as io;
#import "std/time" as time;

fun main(): i32 {
    io.println("\033");
    term.hide_cursor(); // éšè—å…‰æ ‡ï¼Œè®©ç•Œé¢æ›´å¹²å‡€
    term.clear();       // æ¸…å±

    term.fg_cyan();
    term.bold();
    term.move_cursor(3, 5);
    io.println("ğŸš€ Termæ¨¡å—æ¼”ç¤ºğŸš€");
    term.reset();

    // ç»˜åˆ¶åŠ è½½æ¡è¾¹æ¡†
    term.fg_white();
    term.move_cursor(5, 5);
    io.print("[");
    term.move_cursor(5, 55); // è¾¹æ¡†é•¿åº¦ 50
    io.println("]");
    term.reset();

    term.move_cursor(7, 5);
    io.println("æ­£åœ¨åŠ è½½æ¨¡å—...");

    let progress: i64 = 0;
    while (progress <= 50) {
        term.move_cursor(5, 6 + progress); // ç§»åŠ¨åˆ°åŠ è½½æ¡å†…éƒ¨
        
        // æ ¹æ®è¿›åº¦æ”¹å˜é¢œè‰²
        if (progress < 15) { term.fg_red(); }
        else if (progress < 30) { term.fg_yellow(); }
        else { term.fg_green(); }
        
        io.print("#"); // æ‰“å°ä¸€ä¸ªè¿›åº¦å—
        term.reset();
        
        term.move_cursor(7, 25); // æ›´æ–°ç™¾åˆ†æ¯”
        io.print(toString((progress * 100) / 50));
        io.print("% ");
        
        time.sleep(1); // æš‚åœ 1 ç§’ (ç”¨ä½ çš„ time.sleep)
        progress = progress + 1;
    }

    // åŠ è½½å®Œæˆåçš„æ¶ˆæ¯æ¡†
    term.move_cursor(9, 5);
    term.bg_green();
    term.fg_black();
    io.print("                                            "); // å¡«å……èƒŒæ™¯
    term.move_cursor(9, 10);
    io.print("âœ… æ‰€æœ‰æ¨¡å—åŠ è½½å®Œæˆï¼äº«å—å§ï¼ğŸ‰");
    term.reset();
    term.move_cursor(10, 5); // ç§»åˆ°ä¸‹ä¸€è¡Œï¼Œé¿å…é‡å 

    time.sleep(3); // ç­‰å¾… 3 ç§’è®©ç”¨æˆ·çœ‹æ¸…

    term.show_cursor(); // æ¢å¤å…‰æ ‡
    term.clear();       // æœ€ç»ˆæ¸…å±
    term.fg_blue();
    io.println("æ¼”ç¤ºç»“æŸ");
    term.reset();

    return 0;
}
